


<a name="readme-top"></a>  

<div align="center">

  <h1 align="center">Команда Megamen</h1>

  <p align="center">
    <h3>Репозиторий для хакатона «АТОМИК ХАК». От компании Росатома и платформы codenrock
    <br />
    <br />
    Кейс от <a href="https://chmz.net/product/">АО "ЧМЗ"</a>  — «Детектор производственных дефектов».<h3>
    <br />
    <a href="https://github.com/mireaMegaman/perm_hack/issues">Сообщить об ошибке</a>
    ·
    <a href="https://github.com/mireaMegaman/perm_hack/issues">Предложить улучшение</a>
  </p>
</div>

**Содержание:**
1. [Проблематика кейсодержателя](#title1)
2. [Описание решения](#title2)
3. [Развертка приложения](#title3)
4. [Демонстрация работы](#title4)


## <a id="title1">Часть 1. Проблематика кейсодержателя</a>
Задание от АО "ЧМЗ" состояло в следующем: 
было необходимо **создать MVP приложение для детекции производственных дефектов по фотографии**.

Приложение может использоваться для:
* общего улучшения качества продукции;
* минимизации ручной проверки качества производимого товара.

Важными особенностями при обучении модели команда выделяет:
* определения разных видов дефектов;
* точное определение местоположения дефекта на отсматриваемом участке.


<p align="right">(<a href="#readme-top"><i>Вернуться наверх</i></a>)</p>

## <a id="title2">Часть 2. Краткое описание решения</a>

**Используемый стек технологий:**


**Общая схема решения:**



**В качестве моделей мы предлагаем::**
1. Модель YoloV8 и классификатор — обнаружение дефектов;
2. Ансамбль из YOLO v8 и RT-DETR и классификатор — обнаружение дефектов и более верное исключение не дефектных случаев;

По умолчанию, в нашем решении предоставлен **первый вариант** — однако, приложение может быть пересобрано и под более точное определение дефекта. 

На изображениях ниже вы можете видеть приблизительную схему предсказания моделей в нашем решении.



**Для демонстрационного приложения были выбраны:**

*  Flutter - для сборки мультиплатформенного приложения, с возможностью **развития** из десктопного варианта и в мобильную среду разработки;

*  FastAPI - в качестве внутренней серверной части, для обеспечения быстрого и эффективного взаимодействия ML моделей с приложением;


**Развитие и масштабируемость:**

Модель:
* Возможность улучшения показателей распознавания (использование GPU, Active Learning);
* Использование моделей с большим количеством параметров (CO-DETR);

Приложение:
* Разработка мобильной версии приложения под Android;
* Работа c RTSP-потоками и real-time видео; 


<p align="right">(<a href="#readme-top"><i>Вернуться наверх</i></a>)</p>

## <a id="title3">Часть 3. Развертка приложения</a>

Для корректного запуска плеера вам может понадобиться mpv player: [open-source link download](https://mpv.io/installation/) 

**Запуск приложения на устройстве с Windows или Linux**
Благодаря Flutter существует возможность собрать финальное приложение на разные платформы заранее. 
Таким образом, для быстрого тестирования можно запустить собранное приложение по следующей инструкции. <br>

После того, как вы скопировали себе на устройство наш репозиторий - нужно выполнить два простых шага: <br>
1. Для корректной работы BackEnd части (модели, FastAPI) укажите в терминале команду ```docker-compose build```.<br>
2. Далее укажите в терминале команду ```docker-compose up```.<br>
3. Далее: <br>
* На Windows: перейдите в [аналогичную директорию]()
на вашем устройстве и запустите файл ```mmt_fl.exe```.  <br>
* На Linux: перейдите в [аналогичную директорию]()
на вашем устройстве и запустите файл ```mmt_fl```.  <br>

<h3> </h3>

**Развертка приложения на Flutter.**
Если же вы хотите посмотреть на приложение в debug-режиме:
```
$ git clone -b beta https://github.com/flutter/flutter.git
```
в конец файла ```~/.bashrc``` добавить 
```
export PATH=<путь к каталогу>/flutter/bin:$PATH
export ANDROID_HOME=/<путь к каталогу>/android-sdk-linux
export PATH=${PATH}:$ANDROID_HOME/tools:$ANDROID_HOME/platform-tools
```
и проверить правильность установки с помощью
```
$ flutter doctor
```

Для запуска приложения - перейдите к файлу ```./mmt_fl/lib/main.dart``` и запустите его в режиме ```Run and Debug```

**Развертка FastApi-сервера:**

Альтернативный способ запуск FastAPI на локальном хосте (для проверки моделей, без приложения):
* Проверьте, что у вас установлен Python!
В Visual Studio Code (Windows) через терминал последовательно выполнить следующие команды:
```
python -m venv venv
venv/Scripts/activate
```
```
cd BackEnd
pip install -r requirements.txt
```
После установки зависимостей:
```
cd ..
uvicorn BackEnd.main:app
```

<p align="right">(<a href="#readme-top"><i>Вернуться наверх</i></a>)</p>

## <a id="title4">Часть 4. Демонстрация работы решения</a>

Ознакомиться с подробным роликом тестирования приложения можно на нашем канале: https://www.youtube.com/channel/UC5qC_I5o2aatXDSxTHbjxzg

<p align="right">(<a href="#readme-top"><i>Вернуться наверх</i></a>)</p>
